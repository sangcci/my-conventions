# **í”„ë¡œíŒŒì¼ë§**

> ì†ì„± ê°’ ì£¼ì…ì˜ ë¶„ë¥˜

íŠ¹ì • ë°ì´í„°ë² ì´ìŠ¤ë¥¼ staging í™˜ê²½ì—ì„œë§Œ ì‚¬ìš©í•˜ê³  ì‹¶ì„ ìˆ˜ ìˆë‹¤. í˜¹ì€ local í™˜ê²½, dev í™˜ê²½ì—ì„œë§Œ ì‚¬ìš©í•˜ê³  ì‹¶ì„ ìˆ˜ ìˆë‹¤.

Springì—ì„œëŠ” ì´ëŸ° íŠ¹ì • ìƒí™©ì— ë§ëŠ” ì„¤ì • íŒŒì¼ì„ ê·¸ë£¹í™” ì‹œí‚¬ ìˆ˜ ìˆëŠ” `Profile`ì´ë¼ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.

```java
var context = new AnnotationConfigApplicationContext(AppConfig.class);
var environment = applicationContext.getEnvironment();
environment.setActiveProfiles("dev");
context.refresh();
```

ê·¸ë˜ì„œ `@Qualifier`ëŒ€ì‹  `@Profile`ì„ í†µí•´ì„œ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ì‹œ ì§ì ‘ í”„ë¡œíŒŒì¼ì„ í™œì„±í™” ì‹œì¼œì„œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.

- `@Component`
- Configì—ì„œ Bean ë©”ì„œë“œ
ì—ì„œ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.

`@Qualifier`ì— ëŒ€í•œ ë¶€ë¶„ì€ [[ğŸ““ spring Autowired]]ë¶€ë¶„ì„ ì°¸ê³ í•˜ì.

---
# In Spring Boot

### yaml ì¸ì‹ ê°€ëŠ¥

Spring BootëŠ” ì•„ì˜ˆ ymlì„ ì§€ì›í•˜ë„ë¡ ë³€ê²½ë˜ì—ˆë‹¤.

### ì™¸ë¶€ ì„¤ì • ìë™ ì£¼ì…

> Spring Boot configures by default a `PropertySourcesPlaceholderConfigurer` bean that will get properties from `application.properties` and `application.yml` files.|

spring bootëŠ” `PropertySourcesPlaceholderConfigurer`ë¡œ ì¸í•´ `application`ì´ë€ ì´ë¦„ì˜ properties, yml íŒŒì¼ì— ìˆëŠ” ì„¤ì •ë“¤ì„ ì¸ì‹í•´ì„œ PropertySourceê°ì²´ë¡œ ì¶”ê°€í•´ì¤€ë‹¤.

ì™¸ë¶€ ì„¤ì •ì˜ ìš°ì„  ìˆœìœ„ë¥¼ ê³µì‹ ë¬¸ì„œì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ìì„¸í•œ ì‚¬í•­ì€ [[ğŸ““ springbootê°€ ì œê³µí•˜ëŠ” ê¸°ëŠ¥]]ì„ ì°¸ê³ í•˜ì.

**ê·¸ë˜ì„œ ì´ëŸ° ê²½ìš° 'ì¸ì‹(`@PropertySource`)'ì˜ ê³¼ì •ì„ ìƒëµí•˜ê³ , ë°”ë¡œ 'ì£¼ì…(`@Value` ë“±..)'í•˜ë©´ ëœë‹¤.**

### yamlì—ì„œì˜ í”„ë¡œíŒŒì¼ë§

> spring boot ì—ì„œëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ ì™¸ì—ë„ ymlì—ì„œë„ í”„ë¡œíŒŒì¼ë§ì„ ì´ìš©í•  ìˆ˜ ìˆë‹¤.

```yaml
spring:
  config:
    activate:
      on-profile: local

...

---

spring:
  config:
    activate:
      on-profile: dev

...
```

```java
var springApplication = new SpringApplication(~~Application.class);
environment.setActiveProfiles("dev");
var applicationContext = springApplication.run(args);
```

### IDE í™˜ê²½ë³€ìˆ˜ ë“±ë¡

ì‹¤í–‰í•  ë•Œ IDEì— ì„¤ì •í•˜ë©´, `args`ë¡œ ì§ì ‘ ì „ë‹¬í•´ì£¼ëŠ” ê¸°ëŠ¥

IDEì—ì„œë„ ì‹¤í–‰í•˜ëŠ” ë°©ì‹ì´ ì¼ë°˜ Java Applicationì„ ì‹¤í–‰í•˜ëŠ” ê²ƒê³¼ ì¡°ê¸ˆ ë‹¤ë¥´ë‹¤.

`~~Application`ì„ ì‹¤í–‰í•˜ëŠ” ì„¤ì •ì„ ë“¤ì–´ê°€ë©´, ê¸°ë³¸ args ì„¤ì • ì™¸ì—ë„ environment ì„¤ì •, ì´ì™¸ì—ë„ ë‹¤ì–‘í•œ spring boot ì„¤ì •ì„ í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤.

```
// program arguments(String[] args)
--spring.profile.active=dev
```

ì´ë ‡ê²Œ VM í™˜ê²½ ë³€ìˆ˜ì— ë„£ì–´ë„ ëœë‹¤.

[[Spring Boot appliation.yml ì„¤ì • ëª¨ìŒ]]ì„ ì°¸ê³ í•˜ì.
